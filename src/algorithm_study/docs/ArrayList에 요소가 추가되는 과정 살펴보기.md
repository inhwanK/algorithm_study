## ArrayList에 요소가 추가되는 과정 살펴보기

최근 배열에 대해 복습하면서 ArrayList에 대해 잘못 이해하고 있었다는 것을 발견했다.
배열은 정적 배열과 동적 배열로 나뉘는데, 간략히 정리하면 다음과 같다.

### 배열
- 연속된 메모리 공간에 위치한 같은 타입 요소들의 모음
- 숫자 인덱스를 통한 랜덤 접근 가능
- 참조 O(1), 탐색 O(n)

#### 정적 배열
- 크기가 고정된 배열

#### 동적 배열
- 동적으로 요소 할당이 가능한 배열
- Java 의 ArrayList. **요소를 추가할 때 기존 저장 용량을 초과하면 자동으로 용량이 늘어남**


지금까지는 ArrayList 도 LinkedList 처럼 요소가 포인터로 연결된 형태라고 생각해왔다.  
같은 List 타입인데다가 중간 삽입/삭제 등의 api가 제공되는 것이 이유였다. (api를 제공한 것이지 내부 동작은 그렇지 않을 수 있다는 생각을 못했다...)  

결론은 ArrayList 도 배열이었다. 정확히는 정적 배열을 가져서 동적 배열로 사용된다.  
동적으로 크기가 변할 뿐인거지 연속된 메모리 공간, 랜덤 접근 등 주요한 특징은 연결리스트가 아니라 배열이다.   

그렇다면 ArrayList 가 배열의 크기를 구체적으로 어떻게 늘려가는지 궁금해졌다.  

### ArrayList 상위 클래스들

요소가 추가될 때, 배열의 크기가 늘려질 것이다. 따라서 `add(E e)` 메서드에 배열의 크기를 늘리는 로직이 있을 것이라고 추측했다.  
먼저 ArrayList 관련 타입 계층을 살펴봤다.
 
<img src="ArrayList Diagram.png" width="700">

Collection 인터페이스부터 add() 메서드가 추가된다. Collection 을 상속하는 클래스들은 모두 add() 메서드를 가져야 한다는 건데 
Collection 의 자식인 List, AbstractList 를 봤더니 최근 이펙티브 자바에서 학습했던 골격 구조로 된 것임을 파악했다. 골격 구조는 ~ 의도로 만들어 졌기 때문에 ~ 것이라고 추측했다.  

ArrayList 외에도 AbstractList 를 상속하는 동적 배열이 존재할 것이기 때문에, 어쩌면 AbstractList 가 ArrayList 대신에 배열의 크기를 늘리는 로직을 포함할 수도 있겠다고 생각했다. 
